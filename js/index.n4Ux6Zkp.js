import{u as f,j as e,a as y,b as k,c as v,N as I,O as N}from"./index.vbmeblNO.js";import{B as b,b as w,c as E,d as L,D as R,e as H,r as h,M,R as D,I as O,t as F,L as p}from"./ui-lib.Bnf-PDlM.js";import"./framework.DeqkGhWy.js";import"./utils.t--hEgTQ.js";const K="_layoutContainer_13vgq_1",T={layoutContainer:K},$="_navHeader_1ffhc_1",B="_spanSwitch_1ffhc_13",P="_left_1ffhc_16",q="_right_1ffhc_20",z="_nickname_1ffhc_25",u={navHeader:$,spanSwitch:B,left:P,right:q,nickname:z},A={get:s=>{localStorage.getItem(s)},set:(s,o)=>{localStorage.setItem(s,JSON.stringify(o))},remove:s=>{localStorage.removeItem(s)},clear:()=>{localStorage.clear()}};function G(){const{collapsed:s,updateCollapsed:o,isDark:c,updateIsDark:l}=f(),i=[{key:"email",label:"邮箱"},{key:"logout",label:"退出"}],m=({key:a})=>{console.log(a),a==="email"||a==="logout"&&(A.remove("token"),window.location.href="/login")},d=a=>{a?(document.documentElement.dataset.theme="dark",document.documentElement.classList.add("dark")):(document.documentElement.dataset.theme="dark",document.documentElement.classList.remove("dark")),l(a)};return e.jsxs("div",{className:u.navHeader,children:[e.jsx("div",{className:u.left,children:e.jsx(b,{type:"text",icon:s?e.jsx(w,{}):e.jsx(E,{}),onClick:()=>o(),style:{fontSize:"16px",width:64,height:64}})}),e.jsxs("div",{className:u.right,children:[e.jsx("span",{className:u.spanSwitch,children:e.jsx(L,{checkedChildren:"暗黑",unCheckedChildren:"默认",checked:c,onChange:d})}),e.jsx(R,{menu:{items:i,onClick:m},placement:"bottom",children:e.jsxs("div",{children:[e.jsx("span",{className:u.nickname,children:"李星云"}),e.jsx(H,{style:{marginLeft:"3px"}})]})})]})]})}function J(){const s=y(),{menuList:o}=k("layout"),{pathname:c}=v(),[l,i]=h.useState([]),[m,d]=h.useState([]),{collapsed:a,updateCurrentMenu:C}=f();function g(n,r,t,_){return{key:n,label:r,icon:t,children:_}}function x(n){if(!n)return e.jsx(e.Fragment,{});const t=O[n];return t?D.createElement(t):e.jsx(e.Fragment,{})}const j=(n,r=[])=>(n.forEach(t=>{if(t.menuType===1&&t.menuState===1){if(console.log(t),t.buttons)return r.push(g(t.path,t.menuName,x(t.icon)));r.push(g(t.path,t.menuName,x(t.icon),j(t.children)))}}),r),S=({key:n})=>{s(n),C(n),d([n])};return h.useEffect(()=>{const n=j(o);i(n),d([c])},[]),e.jsx(e.Fragment,{children:e.jsx(M,{defaultOpenKeys:["/user"],mode:"inline",theme:"dark",onClick:S,inlineCollapsed:a,selectedKeys:m,items:l})})}const{Sider:Q,Content:U}=p,Z=()=>{const{collapsed:s}=f(),{token:{borderRadiusLG:o}}=F.useToken(),{pathname:c}=v(),{menuPathList:l}=k("layout"),i=["/welcome"];return!l.includes(c)&&!i.includes(c)?e.jsx(I,{to:"/403"}):e.jsx("div",{className:T.layoutContainer,children:e.jsxs(p,{children:[e.jsxs(Q,{trigger:null,collapsible:!0,collapsed:s,children:[e.jsx("div",{className:"demo-logo-vertical"}),e.jsx(J,{})]}),e.jsxs(p,{children:[e.jsx(G,{}),e.jsx(U,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"var(--dark-bg-color)",borderRadius:o},children:e.jsx(N,{})})]})]})})};export{Z as default};
